/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __markAsModule = (target) => __defProp(target, "__esModule", { value: true });
var __export = (target, all) => {
  __markAsModule(target);
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __reExport = (target, module2, desc) => {
  if (module2 && typeof module2 === "object" || typeof module2 === "function") {
    for (let key of __getOwnPropNames(module2))
      if (!__hasOwnProp.call(target, key) && key !== "default")
        __defProp(target, key, { get: () => module2[key], enumerable: !(desc = __getOwnPropDesc(module2, key)) || desc.enumerable });
  }
  return target;
};
var __toModule = (module2) => {
  return __reExport(__markAsModule(__defProp(module2 != null ? __create(__getProtoOf(module2)) : {}, "default", module2 && module2.__esModule && "default" in module2 ? { get: () => module2.default, enumerable: true } : { value: module2, enumerable: true })), module2);
};
var __async = (__this, __arguments, generator) => {
  return new Promise((resolve, reject) => {
    var fulfilled = (value) => {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    };
    var rejected = (value) => {
      try {
        step(generator.throw(value));
      } catch (e) {
        reject(e);
      }
    };
    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);
    step((generator = generator.apply(__this, __arguments)).next());
  });
};

// src/main.ts
__export(exports, {
  SettingTab: () => SettingTab,
  default: () => MyTaskPlugin
});
var import_obsidian3 = __toModule(require("obsidian"));

// src/CreateTaskNote.ts
var import_obsidian2 = __toModule(require("obsidian"));

// src/Notifs.ts
var Notifications = class {
  constructor(vault) {
    this.vault = vault;
  }
  send_notif(message = `This is a test notification`, test) {
    new Notification(`Test Notif`, { body: message, requireInteraction: true });
  }
};

// src/Parser.ts
var import_obsidian = __toModule(require("obsidian"));
var Parser = class {
  constructor(vault, settings) {
    this.vault = vault;
    this.settings = settings;
  }
  parse_for_tasks() {
    return __async(this, null, function* () {
      let Regex = RegExp(/(?<=^\-\s\[\s\]\s)\d+(\-|\/)\d+(\-|\/)\d+\s(\w+(\s|$))+$/gm);
      this.notifications = new Notifications(this.vault);
      const yesterday_file = (0, import_obsidian.normalizePath)(this.settings.CustomFolder + `/` + (0, import_obsidian.moment)().subtract(1, "days").format(this.settings.DateFormat) + `-` + this.settings.CustomFile + `.md`);
      const normalizedFileName = (0, import_obsidian.normalizePath)(this.settings.CustomFolder + `/` + (0, import_obsidian.moment)(new Date()).format(this.settings.DateFormat) + `-` + this.settings.CustomFile + `.md`);
      let new_contents = `## Task Planner`;
      if (yield this.vault.adapter.exists(yesterday_file, false)) {
        let file_contents = (yield this.vault.adapter.read(yesterday_file)).match(Regex);
        if (!file_contents) {
          this.notifications.send_notif("No Tasks in yesterdays note");
        } else {
          this.notifications.send_notif("THERE ARE TASKS" + file_contents[0]);
          for (let i = 0; i <= file_contents.length; i++) {
            let task_date = yield file_contents[i].match(/\d+/g);
            let date_string = task_date[0] + task_date[1] + task_date[2];
            let task_string = yield file_contents[i].match(/(?<=\d+(\-|\/)\d+(\-|\/)\d+\s)(\w+(\s|(?:$)))+(?:$)/);
            if (date_string != (0, import_obsidian.moment)().format(this.settings.DateFormat)) {
              new import_obsidian.Notice("No date" + date_string);
            }
            if (date_string == (0, import_obsidian.moment)().format(this.settings.DateFormat)) {
              this.notifications.send_notif("TASK DUE TODAY (" + date_string + "): " + task_string[0]);
              new import_obsidian.Notice("Date" + date_string);
            }
            new_contents = new_contents + `
- [ ] ` + file_contents[i];
            this.notifications.send_notif(new_contents);
            this.vault.adapter.write(normalizedFileName, new_contents);
          }
        }
      } else {
        this.notifications.send_notif("No File Exists");
      }
    });
  }
};

// src/CreateTaskNote.ts
var FileCreator = class {
  constructor(vault, app, settings) {
    this.vault = vault;
    this.app = app;
    this.settings = settings;
    this.parser = new Parser(this.vault, this.settings);
  }
  createFileIfNotExists(fileName) {
    return __async(this, null, function* () {
      this.notifications = new Notifications(this.vault);
      yield this.createFolderIfNotExists(this.settings.CustomFolder);
      try {
        const normalizedFileName = (0, import_obsidian2.normalizePath)(this.settings.CustomFolder + `/` + (0, import_obsidian2.moment)(new Date()).format(this.settings.DateFormat) + `-` + fileName + `.md`);
        if (!(yield this.vault.adapter.exists(normalizedFileName, false))) {
          yield this.vault.create(normalizedFileName, `## TAslks
- [ ] `);
          this.notifications.send_notif(normalizedFileName);
          this.open_note(this.settings.CustomFile);
          this.parser.parse_for_tasks();
        } else {
          this.notifications.send_notif(`File ${normalizedFileName} already exists`, true);
        }
      } catch (error) {
        this.notifications.send_notif(`Error ${error}`);
      }
    });
  }
  createFolderIfNotExists(folderName) {
    return __async(this, null, function* () {
      try {
        const normalizedPath = (0, import_obsidian2.normalizePath)(folderName);
        const folderExists = yield this.vault.adapter.exists(normalizedPath, false);
        if (!folderExists) {
          yield this.vault.createFolder(normalizedPath);
        }
      } catch (error) {
        new import_obsidian2.Notice(error);
      }
    });
  }
  open_note(note = `Task_Planner`) {
    return __async(this, null, function* () {
      try {
        if (yield this.vault.adapter.exists(yield (0, import_obsidian2.normalizePath)(this.settings.CustomFolder + `/` + (0, import_obsidian2.moment)(new Date()).format(this.settings.DateFormat) + `-` + note + `.md`), false)) {
          new import_obsidian2.Notice("File exists ... opening");
          yield this.app.workspace.openLinkText(this.settings.CustomFolder + `/` + (0, import_obsidian2.moment)(new Date()).format(this.settings.DateFormat) + `-` + note + `.md`, "", true, {
            active: true
          });
        } else {
          new import_obsidian2.Notice("File doesn't exist .... Creating file");
          this.createFileIfNotExists(note);
        }
      } catch (error) {
        this.notifications.send_notif(`Error ${error}`);
      }
    });
  }
};

// src/Settings.ts
var SETTINGS = class {
  constructor() {
    this.OpenOnStart = false;
    this.SideButton = false;
    this.SendNotifs = false;
    this.CustomFolder = "TaskPlanners";
    this.CustomFile = "Task_Planner";
    this.DateFormat = "DDMMYYYY";
    this.StatusBar = false;
  }
};

// src/main.ts
var MyTaskPlugin = class extends import_obsidian3.Plugin {
  constructor() {
    super(...arguments);
    this.ribbonIconEl = void 0;
  }
  loadSettings() {
    return __async(this, null, function* () {
      this.settings = Object.assign(new SETTINGS(), yield this.loadData());
    });
  }
  onload() {
    return __async(this, null, function* () {
      yield this.loadSettings();
      this.add_side_button();
      this.vault = this.app.vault;
      this.notifications = new Notifications(this.vault);
      this.filecreator = new FileCreator(this.vault, this.app, this.settings);
      this.notifications.send_notif(`${this.settings.OpenOnStart}, ${this.settings.SideButton}, ${this.settings.CustomFolder}, ${this.settings.DateFormat}`);
      this.addSettingTab(new SettingTab(this.app, this));
      this.addCommand({
        id: "open_task_planner",
        name: "Open Task Planner Note",
        callback: () => {
          new import_obsidian3.Notice("opening file", 0.2);
          this.filecreator.open_note();
        }
      });
      this.addCommand({
        id: "create_task_note",
        name: "Create a Task Planner Note",
        callback: () => {
          this.filecreator.createFileIfNotExists(this.settings.CustomFile);
        }
      });
    });
  }
  saveSettings() {
    return __async(this, null, function* () {
      yield this.saveData(this.settings);
    });
  }
  add_side_button() {
    var _a;
    (_a = this.ribbonIconEl) == null ? void 0 : _a.remove();
    if (this.settings.SideButton) {
      this.ribbonIconEl = this.addRibbonIcon("crossed-star", "Open Task Planner", (evt) => {
        new import_obsidian3.Notice("opening file");
        this.filecreator.open_note(this.settings.CustomFile);
      });
    }
  }
};
var SettingTab = class extends import_obsidian3.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Task Planner Settings" });
    new import_obsidian3.Setting(containerEl).setName("Open on Start").setDesc("Open the Task Note on startup").addToggle((toggle) => toggle.setValue(this.plugin.settings.OpenOnStart).onChange((value) => __async(this, null, function* () {
      this.plugin.settings.OpenOnStart = value;
      this.plugin.notifications.send_notif(`This is the on start setting `, this.plugin.settings.OpenOnStart);
      this.plugin.saveSettings();
    })));
    new import_obsidian3.Setting(containerEl).setName("Side Bar Button").setDesc("Add a side bar button to open the Task Note").addToggle((toggle) => toggle.setValue(this.plugin.settings.SideButton).onChange((value) => __async(this, null, function* () {
      this.plugin.settings.SideButton = value;
      this.plugin.notifications.send_notif(`This is the sidebutton setting `, this.plugin.settings.SideButton);
      this.plugin.add_side_button();
      this.plugin.saveSettings();
    })));
    new import_obsidian3.Setting(containerEl).setName("Custom Folder").setDesc("Set a custom folder to save the task notes in").addText((text) => text.setPlaceholder("Folder").setValue(this.plugin.settings.CustomFolder).onChange((value) => __async(this, null, function* () {
      this.plugin.settings.CustomFolder = value;
      yield this.plugin.saveSettings();
    })));
    new import_obsidian3.Setting(containerEl).setName("Date Format").setDesc("Date format for file name and task due dates\nDates in preexisting files need to be changed manually\nAutomatic date fixing coming soon").addText((text) => text.setPlaceholder("Date").setValue(this.plugin.settings.DateFormat).onChange((value) => __async(this, null, function* () {
      this.plugin.settings.DateFormat = value;
      yield this.plugin.saveSettings();
    })));
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL0NyZWF0ZVRhc2tOb3RlLnRzIiwgInNyYy9Ob3RpZnMudHMiLCAic3JjL1BhcnNlci50cyIsICJzcmMvU2V0dGluZ3MudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IEZpbGVWaWV3LCBBcHAsIEVkaXRvciwgTWFya2Rvd25WaWV3LCBNb2RhbCwgTm90aWNlLCBQbHVnaW4sIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcsIFRGaWxlLCBUb2dnbGVDb21wb25lbnQsIFZhdWx0LCBub3JtYWxpemVQYXRoLCBtb21lbnQgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB0eXBlIHtNb21lbnQsIFdlZWtTcGVjIH0gZnJvbSAnbW9tZW50JztcclxuaW1wb3J0IHsgY3JlYXRlRGFpbHlOb3RlLCBnZXREYWlseU5vdGVTZXR0aW5nc30gZnJvbSAnb2JzaWRpYW4tZGFpbHktbm90ZXMtaW50ZXJmYWNlJztcclxuXHJcbmltcG9ydCB7RmlsZUNyZWF0b3J9IGZyb20gXCIuL0NyZWF0ZVRhc2tOb3RlXCJcclxuaW1wb3J0IHtOb3RpZmljYXRpb25zfSBmcm9tICcuL05vdGlmcyc7XHJcbmltcG9ydCB7U0VUVElOR1N9IGZyb20gXCIuL1NldHRpbmdzXCI7XHJcbi8vIGltcG9ydCB7IHRleHQgfSBmcm9tICdzdHJlYW0vY29uc3VtZXJzJztcclxuLy8gaW1wb3J0IHsgc2VuZCB9IGZyb20gJ3Byb2Nlc3MnO1xyXG5cclxuXHJcblxyXG4vLyBUaGlzIHdhcyByZW1vdmVkIGZyb20gcGFja2FnZS5qc29uIGFzIGl0IHdhcyBjYXVzaW5nIGFuIGlzc3VlIHdpdGggdHNjb25maWdcclxuLy8gXCJAdHlwZXMvbm9kZVwiOiBcIl4xNi4xMS42XCIsXHJcblxyXG5sZXQgZGF0ZTogTW9tZW50O1xyXG4gXHJcblxyXG5cclxuXHJcbmRlY2xhcmUgZ2xvYmFsIHtcclxuXHRpbnRlcmZhY2UgV2luZG93IHtcclxuXHQgIGFwcDogQXBwO1xyXG5cdCAgbW9tZW50OiAoKSA9PiBNb21lbnQ7XHJcblx0ICBfYnVuZGxlZExvY2FsZVdlZWtTcGVjOiBXZWVrU3BlYztcclxuXHR9XHJcbiAgfVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTXlUYXNrUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcclxuXHR2YXVsdCA6IFZhdWx0O1xyXG5cdHNldHRpbmdzOiBTRVRUSU5HUztcclxuXHRyaWJib25JY29uRWw6IEhUTUxFbGVtZW50IHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xyXG5cdGZpbGVjcmVhdG9yIDogRmlsZUNyZWF0b3I7XHJcblx0bm90aWZpY2F0aW9ucyA6IE5vdGlmaWNhdGlvbnMgXHJcblx0XHJcblxyXG5cdGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcclxuXHRcdC8vIHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLnNldHRpbmdzLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xyXG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24obmV3IFNFVFRJTkdTKCksIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XHJcblx0XHQvL3RoaXMuYWRkX3NpZGVfYnV0dG9uKCk7XHJcblx0fVxyXG5cclxuXHJcblxyXG5cdGFzeW5jIG9ubG9hZCgpe1xyXG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcclxuXHRcdHRoaXMuYWRkX3NpZGVfYnV0dG9uKCk7XHJcblx0XHRcclxuXHRcdHRoaXMudmF1bHQgPSB0aGlzLmFwcC52YXVsdDtcclxuXHRcdHRoaXMubm90aWZpY2F0aW9ucyA9IG5ldyBOb3RpZmljYXRpb25zKHRoaXMudmF1bHQpO1xyXG5cdFx0dGhpcy5maWxlY3JlYXRvciA9IG5ldyBGaWxlQ3JlYXRvcih0aGlzLnZhdWx0LCB0aGlzLmFwcCwgdGhpcy5zZXR0aW5ncylcclxuXHJcblx0XHQvLyBjb25zdCBub3JtYWxpemVkUGF0aCA9IG5vcm1hbGl6ZVBhdGgoYCdUYXNrJ2ApO1xyXG5cdFx0Ly8gY29uc3QgRmlsZUV4aXN0cyA9IGF3YWl0IHRoaXMudmF1bHQuYWRhcHRlci5leGlzdHMobm9ybWFsaXplZFBhdGgsIGZhbHNlKTtcclxuXHJcblx0XHR0aGlzLm5vdGlmaWNhdGlvbnMuc2VuZF9ub3RpZihgJHt0aGlzLnNldHRpbmdzLk9wZW5PblN0YXJ0fSwgJHt0aGlzLnNldHRpbmdzLlNpZGVCdXR0b259LCAke3RoaXMuc2V0dGluZ3MuQ3VzdG9tRm9sZGVyfSwgJHt0aGlzLnNldHRpbmdzLkRhdGVGb3JtYXR9YClcclxuXHJcblx0XHR0aGlzLmFkZFNldHRpbmdUYWIobmV3IFNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcclxuXHRcdFxyXG5cclxuXHJcblxyXG5cdFx0Ly8gVE9ETyBDcmVhdGUgYSBzY3JpcHQgdG8gb3BlbiBub3RlIG9uIHN0YXJ0dXBcclxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XHJcblx0XHRcdGlkOiAnb3Blbl90YXNrX3BsYW5uZXInLFxyXG5cdFx0XHRuYW1lOiAnT3BlbiBUYXNrIFBsYW5uZXIgTm90ZScsXHJcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XHJcblx0XHRcdFx0Ly8oZmlsZSkgPT4ge1xyXG5cdFx0XHRcdC8vIGFjdGl2ZUZpbGUuc2V0RmlsZShmaWxlKS5jcmVhdGVEYWlseU5vdGUoZGF0ZSlcclxuXHRcdFx0XHRuZXcgTm90aWNlKCdvcGVuaW5nIGZpbGUnLCAwLjIpXHJcblx0XHRcdFx0dGhpcy5maWxlY3JlYXRvci5vcGVuX25vdGUoKVxyXG5cdFx0XHRcdC8vfS5cclxuXHRcdFx0fVx0XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBUT0RPIGFkZCBhIGZ1bmN0aW9uIHRvIGNyZWF0ZSBhIGZvbGRlciBpZiAxIGRvZXNuJ3QgZXhpc3RcclxuXHRcdC8vIFRPRE8gYWRkIGRhdGUgdG8gZmlsbGUgbmFtZVxyXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcclxuXHRcdFx0aWQ6ICdjcmVhdGVfdGFza19ub3RlJyxcclxuXHRcdFx0bmFtZTogJ0NyZWF0ZSBhIFRhc2sgUGxhbm5lciBOb3RlJyxcclxuXHRcdFx0Y2FsbGJhY2s6ICgpID0+IHtcclxuXHRcdFx0XHR0aGlzLmZpbGVjcmVhdG9yLmNyZWF0ZUZpbGVJZk5vdEV4aXN0cyh0aGlzLnNldHRpbmdzLkN1c3RvbUZpbGUpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIGlmICghRmlsZUV4aXN0cyl7XHJcblx0XHRcdFx0Ly8gXHR0aGlzLnZhdWx0LmNyZWF0ZShub3JtYWxpemVkUGF0aCwgYCMjIFRBU0tLS0tLU2ApO1xyXG5cdFx0XHRcdC8vIFx0dGhpcy5zZW5kX25vdGlmKCdGaWxlIENyZWF0ZWQgJyk7XHJcblxyXG5cdFx0XHRcdC8vIH1cclxuXHJcblxyXG5cdFx0XHR9XHJcblxyXG5cdFx0fSk7XHJcblxyXG5cdH1cclxuXHJcblx0XHJcblxyXG5cdGFzeW5jIHNhdmVTZXR0aW5ncygpe1xyXG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcclxuXHJcblx0fVxyXG5cclxuXHRcclxuXHJcblx0XHJcblxyXG5cdHB1YmxpYyBhZGRfc2lkZV9idXR0b24oKXtcclxuXHRcdHRoaXMucmliYm9uSWNvbkVsPy5yZW1vdmUoKTtcclxuXHRcdGlmICh0aGlzLnNldHRpbmdzLlNpZGVCdXR0b24gKXtcdFxyXG5cdFx0XHR0aGlzLnJpYmJvbkljb25FbCA9IHRoaXMuYWRkUmliYm9uSWNvbignY3Jvc3NlZC1zdGFyJywgJ09wZW4gVGFzayBQbGFubmVyJywgKGV2dDogTW91c2VFdmVudCkgPT4ge1xyXG5cdFx0XHRcdC8vIENhbGxlZCB3aGVuIHRoZSB1c2VyIGNsaWNrcyB0aGUgaWNvbi5cclxuXHRcdFx0Ly9cdG5ldyBOb3RpY2UoJ1BsdWdpbiBjbGlja2VkIScpO1xyXG5cdFx0XHRcdG5ldyBOb3RpY2UoJ29wZW5pbmcgZmlsZScpXHJcblx0XHRcdFx0dGhpcy5maWxlY3JlYXRvci5vcGVuX25vdGUodGhpcy5zZXR0aW5ncy5DdXN0b21GaWxlKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblxyXG5cdH1cclxuXHJcblx0XHJcblxyXG5cdFxyXG59XHJcblxyXG5cclxuXHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIFNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcclxuXHRwbHVnaW46IE15VGFza1BsdWdpbjtcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogTXlUYXNrUGx1Z2luKSB7XHJcblx0XHRzdXBlcihhcHAsIHBsdWdpbik7XHJcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuXHR9XHJcblxyXG5cdGRpc3BsYXkoKTogdm9pZCB7XHJcblx0XHRjb25zdCB7Y29udGFpbmVyRWx9ID0gdGhpcztcclxuXHRcdFxyXG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcclxuXHJcblx0XHRjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7dGV4dDogJ1Rhc2sgUGxhbm5lciBTZXR0aW5ncyd9KTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoJ09wZW4gb24gU3RhcnQnKVxyXG5cdFx0XHQuc2V0RGVzYygnT3BlbiB0aGUgVGFzayBOb3RlIG9uIHN0YXJ0dXAnKVxyXG5cclxuXHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4gXHJcblx0XHRcdFx0dG9nZ2xlXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuT3Blbk9uU3RhcnQpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoIGFzeW5jICh2YWx1ZTogYm9vbGVhbikgPT4ge1x0XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLk9wZW5PblN0YXJ0ID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLm5vdGlmaWNhdGlvbnMuc2VuZF9ub3RpZihgVGhpcyBpcyB0aGUgb24gc3RhcnQgc2V0dGluZyBgLHRoaXMucGx1Z2luLnNldHRpbmdzLk9wZW5PblN0YXJ0KTtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdC8vYXdhaXQgdGhpcy5wbHVnaW4ubG9hZFNldHRpbmdzKCk7XHJcblx0XHRcdFx0fSkpO1xyXG5cdFx0XHRcclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnU2lkZSBCYXIgQnV0dG9uJylcclxuXHRcdFx0LnNldERlc2MoJ0FkZCBhIHNpZGUgYmFyIGJ1dHRvbiB0byBvcGVuIHRoZSBUYXNrIE5vdGUnKVxyXG5cclxuXHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4gXHJcblx0XHRcdFx0dG9nZ2xlXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuU2lkZUJ1dHRvbilcclxuXHRcdFx0XHRcdC5vbkNoYW5nZSggYXN5bmMgKHZhbHVlOiBib29sZWFuKSA9PiB7XHRcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuU2lkZUJ1dHRvbiA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5ub3RpZmljYXRpb25zLnNlbmRfbm90aWYoYFRoaXMgaXMgdGhlIHNpZGVidXR0b24gc2V0dGluZyBgLCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5TaWRlQnV0dG9uKTtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uYWRkX3NpZGVfYnV0dG9uKCk7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHQvL2F3YWl0IHRoaXMucGx1Z2luLmxvYWRTZXR0aW5ncygpO1xyXG5cdFx0XHRcdH0pKTtcdFxyXG5cdFx0XHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0XHQuc2V0TmFtZSgnQ3VzdG9tIEZvbGRlcicpXHJcblx0XHRcdFx0LnNldERlc2MoJ1NldCBhIGN1c3RvbSBmb2xkZXIgdG8gc2F2ZSB0aGUgdGFzayBub3RlcyBpbicpXHJcblx0XHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcblx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoJ0ZvbGRlcicpXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuQ3VzdG9tRm9sZGVyKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5DdXN0b21Gb2xkZXIgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KSlcclxuXHRcdFxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdFx0LnNldE5hbWUoJ0RhdGUgRm9ybWF0JylcclxuXHRcdFx0XHQuc2V0RGVzYygnRGF0ZSBmb3JtYXQgZm9yIGZpbGUgbmFtZSBhbmQgdGFzayBkdWUgZGF0ZXNcXG5EYXRlcyBpbiBwcmVleGlzdGluZyBmaWxlcyBuZWVkIHRvIGJlIGNoYW5nZWQgbWFudWFsbHlcXG5BdXRvbWF0aWMgZGF0ZSBmaXhpbmcgY29taW5nIHNvb24nKVxyXG5cdFx0XHRcdC5hZGRUZXh0KHRleHQgPT4gdGV4dFxyXG5cdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKCdEYXRlJylcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5EYXRlRm9ybWF0KVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5EYXRlRm9ybWF0ID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSkpXHJcblx0XHRcdC8vIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxyXG5cdFx0XHQvLyBcdC5zZXRQbGFjZWhvbGRlcignRW50ZXIgaGVyZScpXHJcblx0XHRcdC8vIFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm15U2V0dGluZylcclxuXHRcdFx0Ly8gXHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdC8vIFx0XHRjb25zb2xlLmxvZygnU2VjcmV0OiAnICsgdmFsdWUpO1xyXG5cdFx0XHQvLyBcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTZXR0aW5nID0gdmFsdWU7XHJcblx0XHRcdC8vIFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0Ly8gXHR9KSk7XHJcblx0fVxyXG59IiwgImltcG9ydCBNeVRhc2tQbHVnaW4sIHt9IGZyb20gJy4vbWFpbidcclxuaW1wb3J0IHtTRVRUSU5HU30gZnJvbSBcIi4vU2V0dGluZ3NcIjtcclxuaW1wb3J0IHtBcHAsIG5vcm1hbGl6ZVBhdGgsIG1vbWVudCwgVmF1bHQsIE5vdGljZX0gZnJvbSAnb2JzaWRpYW4nXHJcbmltcG9ydCB7IE5vdGlmaWNhdGlvbnMgfSBmcm9tICcuL05vdGlmcyc7XHJcbmltcG9ydCB7IFBhcnNlciB9IGZyb20gJy4vUGFyc2VyJztcclxuXHJcblxyXG5cclxuZXhwb3J0ICBjbGFzcyBGaWxlQ3JlYXRvciB7XHJcbiAgICBhcHAgOiBBcHA7XHJcbiAgICB2YXVsdCA6IFZhdWx0IDtcclxuXHRzZXR0aW5nczogU0VUVElOR1M7XHJcbiAgICBub3RpZmljYXRpb25zIDogTm90aWZpY2F0aW9ucztcclxuICAgIHBhcnNlciA6IFBhcnNlcjtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcih2YXVsdCA6IFZhdWx0LCBhcHAgOiBBcHAsIHNldHRpbmdzIDogU0VUVElOR1Mpe1xyXG4gICAgICAgIHRoaXMudmF1bHQgPSB2YXVsdDtcclxuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcclxuICAgICAgICB0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XHJcbiAgICAgICAgdGhpcy5wYXJzZXIgPSBuZXcgUGFyc2VyKHRoaXMudmF1bHQsIHRoaXMuc2V0dGluZ3MpO1xyXG4gICAgfVxyXG5cclxuICAgIFxyXG5cclxuICAgIGFzeW5jIGNyZWF0ZUZpbGVJZk5vdEV4aXN0cyhmaWxlTmFtZTogc3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy5ub3RpZmljYXRpb25zID0gbmV3IE5vdGlmaWNhdGlvbnModGhpcy52YXVsdClcclxuICAgICAgICBhd2FpdCB0aGlzLmNyZWF0ZUZvbGRlcklmTm90RXhpc3RzKHRoaXMuc2V0dGluZ3MuQ3VzdG9tRm9sZGVyKVxyXG4gICAgICAgIHRyeSB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBub3JtYWxpemVkRmlsZU5hbWUgPSBub3JtYWxpemVQYXRoKHRoaXMuc2V0dGluZ3MuQ3VzdG9tRm9sZGVyICsgYC9gICsgbW9tZW50KG5ldyBEYXRlKCkpLmZvcm1hdCh0aGlzLnNldHRpbmdzLkRhdGVGb3JtYXQpICsgYC1gICsgZmlsZU5hbWUgKyBgLm1kYCk7XHJcbiAgICAgICAgICAgIGlmICghYXdhaXQgdGhpcy52YXVsdC5hZGFwdGVyLmV4aXN0cyhub3JtYWxpemVkRmlsZU5hbWUsIGZhbHNlKSkge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy52YXVsdC5jcmVhdGUobm9ybWFsaXplZEZpbGVOYW1lLCBgIyMgVEFzbGtzXHJcbi0gWyBdIGApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZmljYXRpb25zLnNlbmRfbm90aWYobm9ybWFsaXplZEZpbGVOYW1lKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5vcGVuX25vdGUodGhpcy5zZXR0aW5ncy5DdXN0b21GaWxlKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5wYXJzZXIucGFyc2VfZm9yX3Rhc2tzKClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZmljYXRpb25zLnNlbmRfbm90aWYoYEZpbGUgJHtub3JtYWxpemVkRmlsZU5hbWV9IGFscmVhZHkgZXhpc3RzYCwgdHJ1ZSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHRoaXMubm90aWZpY2F0aW9ucy5zZW5kX25vdGlmKGBFcnJvciAke2Vycm9yfWApXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGNyZWF0ZUZvbGRlcklmTm90RXhpc3RzKGZvbGRlck5hbWU6IHN0cmluZyl7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZFBhdGggPSBub3JtYWxpemVQYXRoKGZvbGRlck5hbWUpO1xyXG4gICAgICAgICAgICBjb25zdCBmb2xkZXJFeGlzdHMgPSBhd2FpdCB0aGlzLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKG5vcm1hbGl6ZWRQYXRoLCBmYWxzZSlcclxuICAgICAgICAgICAgaWYoIWZvbGRlckV4aXN0cykge1xyXG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMudmF1bHQuY3JlYXRlRm9sZGVyKG5vcm1hbGl6ZWRQYXRoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoZXJyb3IpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIG9wZW5fbm90ZShub3RlOiBzdHJpbmcgPSBgVGFza19QbGFubmVyYCl7XHJcbiAgICAgICAgXHJcblx0XHR0cnl7XHJcblx0XHRcdGlmIChhd2FpdCB0aGlzLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKGF3YWl0IG5vcm1hbGl6ZVBhdGgodGhpcy5zZXR0aW5ncy5DdXN0b21Gb2xkZXIgKyBgL2AgKyBtb21lbnQobmV3IERhdGUoKSkuZm9ybWF0KHRoaXMuc2V0dGluZ3MuRGF0ZUZvcm1hdCkgKyBgLWAgKyBub3RlICsgYC5tZGApLCBmYWxzZSkpIHtcclxuXHRcdFx0XHRuZXcgTm90aWNlKCdGaWxlIGV4aXN0cyAuLi4gb3BlbmluZycpXHJcblx0XHRcdFx0YXdhaXQgdGhpcy5hcHAud29ya3NwYWNlLm9wZW5MaW5rVGV4dCh0aGlzLnNldHRpbmdzLkN1c3RvbUZvbGRlciArIGAvYCArIG1vbWVudChuZXcgRGF0ZSgpKS5mb3JtYXQodGhpcy5zZXR0aW5ncy5EYXRlRm9ybWF0KSArIGAtYCArIG5vdGUgKyBgLm1kYCwgJycsIHRydWUsIHtcclxuXHRcdFx0XHRcdGFjdGl2ZTogdHJ1ZSxcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNle1xyXG5cdFx0XHRcdG5ldyBOb3RpY2UoJ0ZpbGUgZG9lc25cXCd0IGV4aXN0IC4uLi4gQ3JlYXRpbmcgZmlsZScpXHJcblx0XHRcdFx0dGhpcy5jcmVhdGVGaWxlSWZOb3RFeGlzdHMobm90ZSlcclxuXHRcdFx0fVxyXG5cdFx0fSBjYXRjaCAoZXJyb3Ipe1xyXG5cdFx0XHR0aGlzLm5vdGlmaWNhdGlvbnMuc2VuZF9ub3RpZihgRXJyb3IgJHtlcnJvcn1gKTtcclxuXHRcdFx0XHJcblx0XHR9XHJcblx0fVxyXG5cclxufSIsICJpbXBvcnQge1NFVFRJTkdTfSBmcm9tIFwiLi9TZXR0aW5nc1wiO1xyXG5pbXBvcnQge0FwcCwgbm9ybWFsaXplUGF0aCwgbW9tZW50LCBWYXVsdCwgTWFya2Rvd25WaWV3fSBmcm9tICdvYnNpZGlhbidcclxuXHJcblxyXG5leHBvcnQgY2xhc3MgTm90aWZpY2F0aW9ucyB7XHJcbiAgICB2YXVsdCA6IFZhdWx0O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHZhdWx0OiBWYXVsdCl7XHJcbiAgICAgICAgdGhpcy52YXVsdCA9IHZhdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZW5kX25vdGlmKG1lc3NhZ2U6IHN0cmluZyA9IGBUaGlzIGlzIGEgdGVzdCBub3RpZmljYXRpb25gLCB0ZXN0PzogYm9vbGVhbikge1xyXG5cdFx0bmV3IE5vdGlmaWNhdGlvbihgVGVzdCBOb3RpZmAsIHsgYm9keTogbWVzc2FnZSwgcmVxdWlyZUludGVyYWN0aW9uOiB0cnVlIH0pO1xyXG5cdH1cclxuICAgIFxyXG59IiwgImltcG9ydCB7IEFwcCwgTm90aWNlLCBub3JtYWxpemVQYXRoLCBWYXVsdCwgbW9tZW50IH0gZnJvbSBcIm9ic2lkaWFuXCJcclxuaW1wb3J0IHtOb3RpZmljYXRpb25zfSBmcm9tIFwiLi9Ob3RpZnNcIlxyXG5pbXBvcnQgeyBTRVRUSU5HUyB9IGZyb20gXCIuL1NldHRpbmdzXCI7XHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIFBhcnNlciB7XHJcbiAgICBub3RpZmljYXRpb25zIDogTm90aWZpY2F0aW9ucztcclxuICAgIHZhdWx0IDogVmF1bHQ7XHJcbiAgICBzZXR0aW5ncyA6IFNFVFRJTkdTO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHZhdWx0OiBWYXVsdCwgc2V0dGluZ3MgOiBTRVRUSU5HUyl7XHJcbiAgICAgICAgdGhpcy52YXVsdCA9IHZhdWx0O1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5nc1xyXG4gICAgfVxyXG5cclxuXHRcclxuICAgIC8vVG9ETyBBZGQgdGFzayBhbmQgZGF0ZSB0byB0b2RheXMgZmlsZSBwcm9wZXJseS4gQWRkIGFiaWxpdHkgdG8gdHJhbnNmZXIgbW9yZSB0aGFuIDEgdGFza1xyXG5cclxuXHRhc3luYyBwYXJzZV9mb3JfdGFza3MoKXtcclxuXHRcdFxyXG5cdFx0bGV0IFJlZ2V4IDogUmVnRXhwID0gUmVnRXhwKC8oPzw9XlxcLVxcc1xcW1xcc1xcXVxccylcXGQrKFxcLXxcXC8pXFxkKyhcXC18XFwvKVxcZCtcXHMoXFx3KyhcXHN8JCkpKyQvZ20pXHJcblx0XHR0aGlzLm5vdGlmaWNhdGlvbnMgPSBuZXcgTm90aWZpY2F0aW9ucyh0aGlzLnZhdWx0KVxyXG5cdFx0Ly90aGlzLm5vdGlmaWNhdGlvbnMuc2VuZF9ub3RpZihcIkhFTFBNRVwiKVxyXG5cdFx0Y29uc3QgeWVzdGVyZGF5X2ZpbGUgID0gbm9ybWFsaXplUGF0aCh0aGlzLnNldHRpbmdzLkN1c3RvbUZvbGRlciArIGAvYCArIG1vbWVudCgpLnN1YnRyYWN0KDEsIFwiZGF5c1wiKS5mb3JtYXQodGhpcy5zZXR0aW5ncy5EYXRlRm9ybWF0KSArIGAtYCArIHRoaXMuc2V0dGluZ3MuQ3VzdG9tRmlsZSArIGAubWRgKTtcclxuXHRcdGNvbnN0IG5vcm1hbGl6ZWRGaWxlTmFtZSA9IG5vcm1hbGl6ZVBhdGgodGhpcy5zZXR0aW5ncy5DdXN0b21Gb2xkZXIgKyBgL2AgKyBtb21lbnQobmV3IERhdGUoKSkuZm9ybWF0KHRoaXMuc2V0dGluZ3MuRGF0ZUZvcm1hdCkgKyBgLWAgKyB0aGlzLnNldHRpbmdzLkN1c3RvbUZpbGUgKyBgLm1kYCk7XHJcblxyXG5cdFx0bGV0IG5ld19jb250ZW50cyA9IGAjIyBUYXNrIFBsYW5uZXJgXHJcblxyXG5cdFx0aWYgKGF3YWl0IHRoaXMudmF1bHQuYWRhcHRlci5leGlzdHMoeWVzdGVyZGF5X2ZpbGUsIGZhbHNlKSl7XHJcblx0XHRcdGxldCBmaWxlX2NvbnRlbnRzID0gKGF3YWl0IHRoaXMudmF1bHQuYWRhcHRlci5yZWFkKHllc3RlcmRheV9maWxlKSkubWF0Y2goUmVnZXgpO1xyXG5cdFx0XHQvL2xldCBkYXRlX21hdGNoID0gKGF3YWl0IHRoaXMudmF1bHQuYWRhcHRlci5yZWFkKHllc3RlcmRheV9maWxlKSkuc3BsaXQoLyhcXC18XFwvKS8pXHJcblx0XHRcdC8vbGV0IGRhdGVfc3RyaW5nOiBzdHJpbmcgPSAoZGF0ZV9tYXRjaFswXSArIGRhdGVfbWF0Y2hbMV0gKyBkYXRlX21hdGNoWzJdKVxyXG5cdFx0XHQvL2xldCBleHRyYWN0ZWRfZGF0ZXMgPSBkYXRlX3N0cmluZy5tYXRjaCgvXFxkKy8pXHJcblx0XHQvL1x0bGV0IGZpbGVfYXJyYXkgOiBhbnlcclxuXHRcdFx0Ly9sZXQgZGF0ZV9tYXRjaCA9IChhd2FpdCB0aGlzLnZhdWx0LmFkYXB0ZXIucmVhZCh5ZXN0ZXJkYXlfZmlsZSkpLm1hdGNoKFJlZ0V4cCgvXig/Oig/OjMxKFxcL3wtfFxcLikoPzowP1sxMzU3OF18MVswMl0pKVxcMXwoPzooPzoyOXwzMCkoXFwvfC18XFwuKSg/OjA/WzEzLTldfDFbMC0yXSlcXDIpKSg/Oig/OjFbNi05XXxbMi05XVxcZCk/XFxkezJ9KSR8Xig/OjI5KFxcL3wtfFxcLikwPzJcXDMoPzooPzooPzoxWzYtOV18WzItOV1cXGQpPyg/OjBbNDhdfFsyNDY4XVswNDhdfFsxMzU3OV1bMjZdKXwoPzooPzoxNnxbMjQ2OF1bMDQ4XXxbMzU3OV1bMjZdKTAwKSkpKSR8Xig/OjA/WzEtOV18MVxcZHwyWzAtOF0pKFxcL3wtfFxcLikoPzooPzowP1sxLTldKXwoPzoxWzAtMl0pKVxcNCg/Oig/OjFbNi05XXxbMi05XVxcZCk/XFxkezJ9KSQvKSlcclxuXHRcdFx0Ly8gbGV0IGZpbGVfY29udGVudHMgPSAoYXdhaXQgdGhpcy52YXVsdC5hZGFwdGVyLnJlYWQobm9ybWFsaXplZEZpbGVOYW1lKSkgICAvLy5zZWFyY2goL1xcLVxcc1xcW1xcc1xcXS9nKSAgICAgICAgIC8vYXdhaXQgdGhpcy52YXVsdC5hZGFwdGVyLnJlYWQobm9ybWFsaXplZEZpbGVOYW1lKSkucmVwbGFjZSgvXFwtXFxzXFxbXFxzXFxdL2csICctIFt4XScpO1xyXG5cdFx0XHRpZiAoIWZpbGVfY29udGVudHMpe1xyXG5cdFx0XHRcdHRoaXMubm90aWZpY2F0aW9ucy5zZW5kX25vdGlmKFwiTm8gVGFza3MgaW4geWVzdGVyZGF5cyBub3RlXCIpXHJcblx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdHRoaXMubm90aWZpY2F0aW9ucy5zZW5kX25vdGlmKFwiVEhFUkUgQVJFIFRBU0tTXCIgKyBmaWxlX2NvbnRlbnRzWzBdKVxyXG5cdFx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDw9IGZpbGVfY29udGVudHMubGVuZ3RoOyBpKyspe1xyXG5cdFx0XHRcdFx0bGV0IHRhc2tfZGF0ZSA9IChhd2FpdCBmaWxlX2NvbnRlbnRzW2ldLm1hdGNoKC9cXGQrL2cpKVxyXG5cdFx0XHRcdFx0bGV0IGRhdGVfc3RyaW5nID0gdGFza19kYXRlWzBdICsgdGFza19kYXRlWzFdICsgdGFza19kYXRlWzJdXHJcblx0XHRcdFx0XHRsZXQgdGFza19zdHJpbmcgPSAoYXdhaXQgZmlsZV9jb250ZW50c1tpXS5tYXRjaCgvKD88PVxcZCsoXFwtfFxcLylcXGQrKFxcLXxcXC8pXFxkK1xccykoXFx3KyhcXHN8KD86JCkpKSsoPzokKS8pKVxyXG5cdFx0XHRcdFx0Ly9mb3IgIChsZXQgayA9IDA7IGkgPD0gdGFza19kYXRlLmxlbmd0aDsgaysrKXtcclxuXHRcdFx0XHQvL1x0XHR0YXNrX2RhdGVcclxuXHRcdFx0XHQvL1x0XHJcblx0XHRcdFx0Ly9cdH1cclxuXHRcdFx0XHRcclxuXHJcblx0XHRcdFx0XHRpZiAoZGF0ZV9zdHJpbmcgIT0gbW9tZW50KCkuZm9ybWF0KHRoaXMuc2V0dGluZ3MuRGF0ZUZvcm1hdCkpe1xyXG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKFwiTm8gZGF0ZVwiICtkYXRlX3N0cmluZykvLyhkYXRlX21hdGNoWzBdKVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0aWYgKGRhdGVfc3RyaW5nID09IG1vbWVudCgpLmZvcm1hdCh0aGlzLnNldHRpbmdzLkRhdGVGb3JtYXQpKXtcclxuXHRcdFx0XHRcdFx0dGhpcy5ub3RpZmljYXRpb25zLnNlbmRfbm90aWYoXCJUQVNLIERVRSBUT0RBWSAoXCIgKyBkYXRlX3N0cmluZyArIFwiKTogXCIgKyB0YXNrX3N0cmluZ1swXSlcclxuXHRcdFx0XHRcdFx0bmV3IE5vdGljZShcIkRhdGVcIiArIGRhdGVfc3RyaW5nKS8vKGRhdGVfbWF0Y2hbMF0pXHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0bmV3X2NvbnRlbnRzID0gbmV3X2NvbnRlbnRzICsgYFxyXG4tIFsgXSBgKyBmaWxlX2NvbnRlbnRzW2ldXHJcblx0XHRcdFx0XHR0aGlzLm5vdGlmaWNhdGlvbnMuc2VuZF9ub3RpZihuZXdfY29udGVudHMpXHJcblx0XHRcdFx0XHR0aGlzLnZhdWx0LmFkYXB0ZXIud3JpdGUobm9ybWFsaXplZEZpbGVOYW1lLCBuZXdfY29udGVudHMpXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHR9XHJcblx0XHRcdC8vIFx0Zm9yIChsZXQgaiA9IDA7IGogPD0gZmlsZV9jb250ZW50cy5sZW5ndGg7IGorKyl7XHJcblx0XHRcdC8vIFx0Ly9cdGZpbGVfYXJyYXkuYXBwZW5kKGZpbGVfY29udGVudHNbal0gKyBcIilcclxuXHRcdFx0XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcclxuXHRcdFx0Ly8gXHR9Ly8gbm9ybWFsaXplZEZpbGVOYW1lLlxyXG5cdFx0XHQvLyB9XHJcblx0XHR9IGVsc2V7XHJcblx0XHRcdC8vbmV3IE5vdGljZShcIk5vIEZpbGUgRXhpc3RzXCIpXHJcbiAgICAgICAgICAgIHRoaXMubm90aWZpY2F0aW9ucy5zZW5kX25vdGlmKFwiTm8gRmlsZSBFeGlzdHNcIik7XHJcblx0XHR9XHJcblx0XHRcclxuXHJcblx0fVxyXG5cclxufSIsICJpbXBvcnQgeyBBcHAsIEVkaXRvcn0gZnJvbSAnb2JzaWRpYW4nXHJcblxyXG5leHBvcnQgY2xhc3MgU0VUVElOR1Mge1xyXG4gICAgT3Blbk9uU3RhcnQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIFNpZGVCdXR0b246IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIFNlbmROb3RpZnM6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIEN1c3RvbUZvbGRlcjogc3RyaW5nID0gJ1Rhc2tQbGFubmVycyc7XHJcbiAgICBDdXN0b21GaWxlOiBzdHJpbmcgPSAnVGFza19QbGFubmVyJztcclxuICAgIERhdGVGb3JtYXQ6IHN0cmluZyA9IFwiRERNTVlZWVlcIjtcclxuICAgIFN0YXR1c0JhcjogYm9vbGVhbiA9IGZhbHNlO1xyXG59Il0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLHVCQUE0Sjs7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
